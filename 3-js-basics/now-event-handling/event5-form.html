<!-- /* ===== êµ¬ì‹ ë°©ë²•ê³¼ í˜„ëŒ€ì  ë°©ë²• ë¹„êµ ===== */

/*
1. DOM ìš”ì†Œ ì„ íƒ:
   êµ¬ì‹: document.getElementsByName("food")
   í˜„ëŒ€ì‹: document.querySelectorAll("input[name='food']")
   
   ì¥ì : CSS ì„ íƒìë¡œ ë” êµ¬ì²´ì ì´ê³  ëª…í™•í•œ ì„ íƒ

2. ì´ë²¤íŠ¸ ì²˜ë¦¬:
   êµ¬ì‹: <form onsubmit="checkForm(event)">
   í˜„ëŒ€ì‹: form.addEventListener('submit', validateForm)
   
   ì¥ì : HTMLê³¼ JavaScript ì™„ì „ ë¶„ë¦¬, ì—¬ëŸ¬ í•¸ë“¤ëŸ¬ ë“±ë¡ ê°€ëŠ¥

3. ë°°ì—´ ê²€ì‚¬:
   êµ¬ì‹: for ë°˜ë³µë¬¸ + break
   í˜„ëŒ€ì‹: Array.from().some() ë©”ì„œë“œ
   
   ì¥ì : ë” ì§ê´€ì ì´ê³  í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë° íŒ¨ëŸ¬ë‹¤ì„

4. í•¨ìˆ˜ ì •ì˜:
   êµ¬ì‹: function checkForm(event) {}
   í˜„ëŒ€ì‹: const validateForm = (event) => {}
   
   ì¥ì : ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ íŒ¨í„´ê³¼ ì¼ì¹˜

5. ë¬¸ìì—´ ìƒì„±:
   êµ¬ì‹: ë¬¸ìì—´ ì—°ê²° (+)
   í˜„ëŒ€ì‹: ë°±í‹± í…œí”Œë¦¿ ë¦¬í„°ëŸ´
   
   ì¥ì : ê°€ë…ì„± í–¥ìƒ, HTML ìƒì„± ì‹œ í¸ë¦¬

6. ë°°ì—´ ì²˜ë¦¬:
   êµ¬ì‹: for ë°˜ë³µë¬¸ìœ¼ë¡œ ìˆ˜ì§‘
   í˜„ëŒ€ì‹: filter + map ì²´ì´ë‹
   
   ì¥ì : ì„ ì–¸ì  í”„ë¡œê·¸ë˜ë°, ì¬ì‚¬ìš© ê°€ëŠ¥í•œ íŒ¨í„´

7. ì‚¬ìš©ì ê²½í—˜:
   êµ¬ì‹: alert() ì‚¬ìš©
   í˜„ëŒ€ì‹: DOM ì¡°ì‘ìœ¼ë¡œ ì‹œê°ì  í”¼ë“œë°±
   
   ì¥ì : ë” ë‚˜ì€ UX, ì‚¬ìš©ì ì¹œí™”ì 

8. ë¦¬ì•¡íŠ¸ ì—°ê³„ì„±:
   - ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ íŒ¨í„´ì´ ë¦¬ì•¡íŠ¸ onClickê³¼ ë™ì¼
   - ìƒíƒœ ê²€ì¦ ë¡œì§ì´ ë¦¬ì•¡íŠ¸ í¼ ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ ìœ ì‚¬
   - ì¡°ê±´ë¶€ ë Œë”ë§ íŒ¨í„´ í•™ìŠµ íš¨ê³¼
*/ -->



<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>í¼ ê²€ì¦ - í˜„ëŒ€ì  ë°©ì‹</title>
</head>
<body>

<h2>ğŸ” í¼ ê²€ì¦ - querySelector + addEventListener ë°©ì‹</h2>

<!-- 
    action : ì²˜ë¦¬í•  ì„œë²„ í”„ë¡œê·¸ë¨ URL 
    onsubmit ì†ì„± ì œê±° - JavaScriptì—ì„œ addEventListenerë¡œ ì²˜ë¦¬
-->
<form action="view/form-process.jsp" id="menuForm">
    <!-- 
        formì„ ì´ìš©í•œ ì„œë²„ ì „ì†¡ì„ ìœ„í•´ì„œëŠ” nameì€ í•„ìˆ˜ì ì´ë‹¤ 
        idëŠ” HTML elementë¥¼ ì œì–´í•˜ëŠ” ìš©ë„ë¡œ ì£¼ë¡œ ì‚¬ìš©ëœë‹¤ 
    -->
    <div>
        <label for="nickName">ë³„ëª…:</label>
        <input type="text" id="nickName" name="nickName" placeholder="ë³„ëª…ì„ ì…ë ¥í•˜ì„¸ìš”" required>
    </div>
    <br>
    
    <fieldset>
        <legend>ì¢‹ì•„í•˜ëŠ” ìŒì‹ì„ ì„ íƒí•˜ì„¸ìš” (ìµœì†Œ 1ê°œ)</legend>
        <input type="checkbox" id="food1" name="food" value="ê¹€ë°¥">
        <label for="food1">~ê¹€ë°¥~</label><br>
        
        <input type="checkbox" id="food2" name="food" value="ëˆê¹ŒìŠ¤">
        <label for="food2">*ëˆê¹ŒìŠ¤*</label><br>
        
        <input type="checkbox" id="food3" name="food" value="ë¹ˆëŒ€ë–¡">
        <label for="food3">ë¹ˆëŒ€ë–¡!!!!</label><br>
    </fieldset>
    <br>
    
    <button type="submit">ì „ì†¡</button>
    <button type="reset" id="resetBtn">ì´ˆê¸°í™”</button>
</form>

<div id="validationMessage"></div>
<div id="formData"></div>

<script type="text/javascript">

/* ===== í˜„ëŒ€ì  í¼ ê²€ì¦ - querySelector + addEventListener ë°©ì‹ ===== */

// 1. DOM ìš”ì†Œë“¤ì„ querySelectorë¡œ ì„ íƒ
const menuForm = document.querySelector("#menuForm");                    // ID ì„ íƒìë¡œ í¼ ìš”ì†Œ
const nickNameInput = document.querySelector("#nickName");               // ID ì„ íƒìë¡œ ë³„ëª… ì…ë ¥ë€
const foodCheckboxes = document.querySelectorAll("input[name='food']");  // ì†ì„± ì„ íƒìë¡œ ìŒì‹ ì²´í¬ë°•ìŠ¤ë“¤
const resetButton = document.querySelector("#resetBtn");                 // ID ì„ íƒìë¡œ ë¦¬ì…‹ ë²„íŠ¼
const messageDiv = document.querySelector("#validationMessage");         // ê²€ì¦ ë©”ì‹œì§€ í‘œì‹œìš©
const formDataDiv = document.querySelector("#formData");                 // í¼ ë°ì´í„° í‘œì‹œìš©

// 2. í¼ ê²€ì¦ í•¨ìˆ˜ - í™”ì‚´í‘œ í•¨ìˆ˜ ì‚¬ìš© (ë¦¬ì•¡íŠ¸ ìŠ¤íƒ€ì¼)
const validateForm = (event) => {
    console.log('=== í¼ ê²€ì¦ ì‹œì‘ ===');
    
    // ë³„ëª… ì…ë ¥ ê²€ì¦
    const nickName = nickNameInput.value.trim();  // trim()ìœ¼ë¡œ ê³µë°± ì œê±°
    if (nickName === '') {
        showValidationMessage('ë³„ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!', 'error');
        nickNameInput.focus();  // í¬ì»¤ìŠ¤ë¥¼ ë³„ëª… ì…ë ¥ë€ìœ¼ë¡œ ì´ë™
        event.preventDefault(); // í¼ ì „ì†¡ ì¤‘ë‹¨
        return false;
    }
    
    // ì²´í¬ë°•ìŠ¤ ì„ íƒ ê²€ì¦ - some() ë©”ì„œë“œ ì‚¬ìš© (í˜„ëŒ€ì  ë°©ì‹)
    const isAnyFoodSelected = Array.from(foodCheckboxes).some(checkbox => checkbox.checked);
    
    // êµ¬ì‹ ë°©ë²•ê³¼ ë¹„êµë¥¼ ìœ„í•œ ì£¼ì„
    /*
    // êµ¬ì‹ ë°©ë²•: for ë°˜ë³µë¬¸ ì‚¬ìš©
    let checkFlag = false;
    for(let i = 0; i < foodCheckboxes.length; i++){
        if(foodCheckboxes[i].checked){
            checkFlag = true;
            break;
        }
    }
    */
    
    if (!isAnyFoodSelected) {
        showValidationMessage('ì¢‹ì•„í•˜ëŠ” ìŒì‹ì„ ìµœì†Œ 1ê°œ ì„ íƒí•´ì£¼ì„¸ìš”!', 'error');
        
        // ì²« ë²ˆì§¸ ì²´í¬ë°•ìŠ¤ì— í¬ì»¤ìŠ¤
        foodCheckboxes[0].focus();
        
        // event.preventDefault(): ê¸°ë³¸ ë™ì‘(í¼ ì „ì†¡) ë°©ì§€
        event.preventDefault();
        return false;
    }
    
    // ëª¨ë“  ê²€ì¦ í†µê³¼ ì‹œ
    showSelectedData();
    showValidationMessage('ê²€ì¦ ì™„ë£Œ! í¼ì´ ì „ì†¡ë©ë‹ˆë‹¤.', 'success');
    
    // ì‹¤ì œ ì„œë²„ ì „ì†¡ì„ ë§‰ê³  ë°ëª¨ìš©ìœ¼ë¡œ í‘œì‹œë§Œ í•˜ê¸°
    // ì‹¤ë¬´ì—ì„œëŠ” ì´ ë¶€ë¶„ì„ ì œê±°í•˜ë©´ ì„œë²„ë¡œ ì „ì†¡ë¨
    event.preventDefault();
    
    console.log('í¼ ê²€ì¦ ì™„ë£Œ - ëª¨ë“  ì¡°ê±´ ë§Œì¡±');
    return true;
};

// 3. ê²€ì¦ ë©”ì‹œì§€ í‘œì‹œ í•¨ìˆ˜
const showValidationMessage = (message, type) => {
    messageDiv.innerHTML = `
        <div style="
            padding: 10px; 
            margin: 10px 0; 
            border-radius: 5px;
            border: 1px solid ${type === 'error' ? '#f5c6cb' : '#c3e6cb'};
            background-color: ${type === 'error' ? '#f8d7da' : '#d4edda'};
            color: ${type === 'error' ? '#721c24' : '#155724'};
        ">
            ${type === 'error' ? 'âŒ' : 'âœ…'} ${message}
        </div>
    `;
    
    // 3ì´ˆ í›„ ë©”ì‹œì§€ ìë™ ì œê±°
    setTimeout(() => {
        messageDiv.innerHTML = '';
    }, 3000);
};

// 4. ì„ íƒëœ ë°ì´í„° í‘œì‹œ í•¨ìˆ˜
const showSelectedData = () => {
    const nickName = nickNameInput.value.trim();
    
    // ì„ íƒëœ ìŒì‹ë“¤ì„ ë°°ì—´ë¡œ ìˆ˜ì§‘ - filter + map ì¡°í•©
    const selectedFoods = Array.from(foodCheckboxes)
        .filter(checkbox => checkbox.checked)  // ì²´í¬ëœ ê²ƒë§Œ í•„í„°ë§
        .map(checkbox => checkbox.value);      // value ê°’ë§Œ ì¶”ì¶œ
    
    // ë°±í‹±ì„ ì‚¬ìš©í•œ í…œí”Œë¦¿ ë¦¬í„°ëŸ´ë¡œ HTML ìƒì„±
    const dataHTML = `
        <h3>ğŸ“‹ ì…ë ¥ëœ ë°ì´í„°</h3>
        <div style="background-color: #f8f9fa; padding: 15px; border-radius: 5px; border: 1px solid #dee2e6;">
            <p><strong>ë³„ëª…:</strong> ${nickName}</p>
            <p><strong>ì„ íƒí•œ ìŒì‹:</strong></p>
            <ul>
                ${selectedFoods.map(food => `<li>${food}</li>`).join('')}
            </ul>
            <p><strong>ì„ íƒëœ ìŒì‹ ê°œìˆ˜:</strong> ${selectedFoods.length}ê°œ</p>
            <p><strong>ì „ì†¡ ì‹œê°„:</strong> ${new Date().toLocaleString()}</p>
        </div>
    `;
    
    formDataDiv.innerHTML = dataHTML;
    
    console.log('ì „ì†¡ë  ë°ì´í„°:', {
        nickName: nickName,
        selectedFoods: selectedFoods,
        timestamp: new Date().toLocaleString()
    });
};

// 5. ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡ - addEventListener ì‚¬ìš©
// êµ¬ì‹: <form onsubmit="checkForm(event)">
// í˜„ëŒ€ì‹: addEventListener ì‚¬ìš©
menuForm.addEventListener('submit', validateForm);

// 6. ì¶”ê°€ ê¸°ëŠ¥ë“¤ - ì‚¬ìš©ì ê²½í—˜ ê°œì„ 

// ì‹¤ì‹œê°„ ì…ë ¥ ê²€ì¦ - ë³„ëª… ì…ë ¥ë€
nickNameInput.addEventListener('input', function(event) {
    const value = event.target.value.trim();
    
    // ì…ë ¥ê°’ì— ë”°ë¥¸ ì‹œê°ì  í”¼ë“œë°±
    if (value.length > 0) {
        event.target.style.borderColor = '#28a745';  // ì´ˆë¡ìƒ‰ í…Œë‘ë¦¬
        event.target.style.backgroundColor = '#f8fff8';
    } else {
        event.target.style.borderColor = '#dc3545';  // ë¹¨ê°„ìƒ‰ í…Œë‘ë¦¬
        event.target.style.backgroundColor = '#fff8f8';
    }
    
    // ê¸¸ì´ ì œí•œ ë° ì•ˆë‚´
    if (value.length > 20) {
        showValidationMessage('ë³„ëª…ì€ 20ì ì´í•˜ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'error');
    }
});

// ì‹¤ì‹œê°„ ì²´í¬ë°•ìŠ¤ ê²€ì¦
foodCheckboxes.forEach(function(checkbox) {
    checkbox.addEventListener('change', function(event) {
        const selectedCount = Array.from(foodCheckboxes)
            .filter(cb => cb.checked).length;
        
        // ì„ íƒëœ ê°œìˆ˜ì— ë”°ë¥¸ í”¼ë“œë°±
        const fieldset = document.querySelector('fieldset');
        if (selectedCount > 0) {
            fieldset.style.borderColor = '#28a745';
            fieldset.style.backgroundColor = '#f8fff8';
        } else {
            fieldset.style.borderColor = '#dc3545';
            fieldset.style.backgroundColor = '#fff8f8';
        }
        
        console.log(`ìŒì‹ ì„ íƒ ë³€ê²½: ${event.target.value} - ${event.target.checked ? 'ì„ íƒ' : 'í•´ì œ'}`);
        console.log(`í˜„ì¬ ì„ íƒëœ ê°œìˆ˜: ${selectedCount}ê°œ`);
    });
});

// ë¦¬ì…‹ ë²„íŠ¼ ê¸°ëŠ¥ ê°•í™”
resetButton.addEventListener('click', function(event) {
    // ê¸°ë³¸ ë¦¬ì…‹ ë™ì‘ì€ ìœ ì§€í•˜ë˜, ì¶”ê°€ ì‘ì—… ìˆ˜í–‰
    setTimeout(() => {
        // í¼ì´ ë¦¬ì…‹ëœ í›„ ì‹¤í–‰
        messageDiv.innerHTML = '';
        formDataDiv.innerHTML = '';
        
        // ìŠ¤íƒ€ì¼ ì´ˆê¸°í™”
        nickNameInput.style.borderColor = '';
        nickNameInput.style.backgroundColor = '';
        
        const fieldset = document.querySelector('fieldset');
        fieldset.style.borderColor = '';
        fieldset.style.backgroundColor = '';
        
        showValidationMessage('í¼ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
        console.log('í¼ ì´ˆê¸°í™” ì™„ë£Œ');
    }, 10);
});

// 7. í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
document.addEventListener('DOMContentLoaded', function() {
    console.log('í¼ ê²€ì¦ ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì™„ë£Œ');
    
    // ì´ˆê¸° ì•ˆë‚´ ë©”ì‹œì§€
    showValidationMessage('ë³„ëª…ì„ ì…ë ¥í•˜ê³  ì¢‹ì•„í•˜ëŠ” ìŒì‹ì„ ì„ íƒí•´ì£¼ì„¸ìš”.', 'success');
    
    // ì²« ë²ˆì§¸ ì…ë ¥ë€ì— í¬ì»¤ìŠ¤
    nickNameInput.focus();
});




</script>
</body>
</html>